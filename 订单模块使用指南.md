# LensFlow 订单模块使用指南

## 📱 如何运行项目

### 方式一：使用微信开发者工具（推荐）

1. **打开微信开发者工具**
   - 下载并安装 [微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)

2. **导入项目**
   - 点击左上角「导入」按钮
   - 项目目录选择：`/Users/niefuqiang/Desktop/work/github-project/LensFlow/dist/build/mp-weixin`
   - AppID：使用测试号或自己的 AppID
   - 项目名称：LensFlow

3. **运行项目**
   - 导入后自动编译运行
   - 可以在模拟器中查看效果

### 方式二：开发模式（实时热更新）

```bash
# 1. 进入项目目录
cd /Users/niefuqiang/Desktop/work/github-project/LensFlow

# 2. 运行开发命令
npm run dev:mp-weixin

# 3. 打开微信开发者工具
# 导入目录：dist/dev/mp-weixin
```

---

## 🎯 订单模块功能指南

### 1. 订单列表页

**入口**：点击工作台「项目订单」卡片

**功能**：
- **顶部统计**：显示总订单数和待付款订单数
- **Tab 筛选**：
  - 全部：显示所有订单
  - 待付款：显示未付款/定金的订单
  - 进行中：显示已确认/拍摄中/后期中的订单
  - 待交付：显示已交付的订单

### 2. 查看订单详情

**操作**：点击订单卡片 → 查看详情

**详情内容**：
- 📋 订单信息（订单号、创建时间、确认时间）
- 👤 客户信息（姓名、电话、头像）
- 📷 拍摄信息（日期、时间、类型、地点）
- 💰 金额信息（总额、已付、未付、付款状态）
- 📦 交付进度（交付状态、预计/实际交付日期）
- 📝 备注（客户备注、内部备注）

**操作按钮**：
- **编辑**：修改订单信息（已完成订单不可编辑）
- **删除**：删除草稿或待确认订单
- **状态变更**：推进订单到下一状态
- **联系客户**：拨打客户电话

### 3. 创建新订单

**操作**：点击右下角 `+` 悬浮按钮 → 新建订单

**必填信息**：
- 客户姓名
- 联系电话
- 拍摄日期
- 订单总额

**选填信息**：
- 拍摄时间（开始/结束）
- 拍摄类型
- 拍摄地点
- 已付金额
- 定金金额
- 客户备注
- 内部备注

### 4. 编辑订单

**操作**：
- 方式一：订单详情页 → 点击「编辑」按钮
- 方式二：订单卡片 → 点击「编辑」按钮

**编辑限制**：
- 草稿、待确认状态：可编辑所有字段
- 已确认、进行中状态：仅可编辑金额、备注、交付信息
- 已完成状态：不可编辑

### 5. 订单状态流转

```
草稿 → 待确认 → 已确认 → 拖摄中 → 后期中 → 已交付 → 已完成
          ↓                                            ↓
      已取消 ← ───────────────────────────────── → 已退款
```

**状态说明**：
| 状态 | 说明 | 可转状态 |
|------|------|----------|
| 草稿 | 订单创建后的初始状态 | 待确认、已取消 |
| 待确认 | 已提交等待确认 | 已确认、已取消 |
| 已确认 | 已确认收到定金 | 拍摄中、已取消、已退款 |
| 拍摄中 | 正在拍摄 | 后期中、已取消 |
| 后期中 | 正在后期处理 | 已交付、已取消 |
| 已交付 | 已交付给客户 | 已完成 |
| 已完成 | 客户确认满意 | - |
| 已取消 | 订单取消 | - |
| 已退款 | 订单退款 | - |

### 6. 档期转订单

**入口**：档期详情页 → 点击「转为订单」按钮

**条件**：
- 档期状态为「已确认」
- 档期未关联订单

**效果**：
- 自动填充档期信息到订单表单
- 补充金额信息后即可创建订单
- 档期和订单自动关联

---

## 💰 付款状态说明

| 状态 | 说明 |
|------|------|
| 未付款 | 尚未收到任何款项 |
| 已付定金 | 收到定金（未达到定金金额） |
| 部分付款 | 已付金额超过定金，但未全额 |
| 全额付款 | 已收到全部款项 |

付款进度条可视化展示已付款比例。

---

## 📦 交付状态说明

| 状态 | 说明 |
|------|------|
| 未开始 | 尚未开始交付 |
| 拍摄中 | 正在拍摄 |
| 后期中 | 正在进行后期处理 |
| 客户确认中 | 已交付，等待客户确认 |
| 已交付 | 客户已确认 |
| 需修改 | 客户要求修改 |

---

## 🎨 UI 设计特点

- **深色主题**：背景 #121212，符合高端摄影风格
- **状态颜色**：每个状态有独特的颜色标识
  - 拍摄中：蓝色 #2196F3
  - 后期中：紫色 #9C27B0
  - 已交付：青色 #00BCD4
  - 已取消：红色 #F44336
- **毛玻璃效果**：半屏弹窗使用毛玻璃背景
- **平滑动画**：页面切换、弹窗展开均有动画

---

## 📝 Mock 数据说明

项目使用 Mock 数据模拟后端，数据文件位置：
- 订单数据：`src/mock-data/orders.json`
- 档期数据：`src/mock-data/schedules.json`
- 预约申请：`src/mock-data/requests.json`

**注意**：当前数据仅用于演示，刷新页面后会重置。

---

## 🔧 开发相关

### 项目结构

```
src/pages/orders/
├── index.vue                    # 订单主页面
└── components/
    ├── OrderCard.vue            # 订单卡片
    ├── OrderList.vue            # 订单列表
    ├── OrderDetail.vue          # 订单详情弹窗
    ├── OrderForm.vue            # 订单表单
    └── OrderFilter.vue          # 订单筛选器
```

### 技术栈

- **框架**：Uni-app + Vue 3 (Composition API)
- **样式**：SCSS + CSS 变量主题系统
- **构建工具**：Vite 5.4.2

---

## ❓ 常见问题

### Q1: 如何查看订单统计数据？
A: 订单列表页顶部显示「总订单数」和「待付款数」

### Q2: 如何联系客户？
A: 在订单详情页点击「联系客户」按钮，自动拨打电话

### Q3: 订单可以删除吗？
A: 草稿和待确认状态的订单可以删除

### Q4: 档期和订单有什么区别？
A: 档期管理拍摄时间安排，订单管理商务流程（金额、付款、交付）

### Q5: 如何从档期创建订单？
A: 在已确认的档期详情页，点击「转为订单」按钮

---

## 🎉 完成

编译后的文件位于：`dist/build/mp-weixin`

使用微信开发者工具导入该目录即可运行和预览！
